"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.handler = void 0;
const aws_sdk_1 = require("aws-sdk");
const cloudevents_1 = require("cloudevents");
const iot = new aws_sdk_1.Iot();
exports.handler = async (event) => {
    console.log(event);
    const requestedCloudEvent = new cloudevents_1.CloudEvent(event);
    const newRequestedStatus = requestedCloudEvent.data.new_status;
    if (newRequestedStatus === "ACTIVE" || newRequestedStatus === "INACTIVE" || newRequestedStatus === "REVOKED") {
        await iot.updateCertificate({ newStatus: newRequestedStatus, certificateId: requestedCloudEvent.data.certificate_id }).promise();
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSxxQ0FBNkI7QUFDN0IsNkNBQXdDO0FBRXhDLE1BQU0sR0FBRyxHQUFHLElBQUksYUFBRyxFQUFFLENBQUE7QUFFUixRQUFBLE9BQU8sR0FBRyxLQUFLLEVBQUUsS0FBVSxFQUFFLEVBQUU7SUFDMUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQTtJQUVsQixNQUFNLG1CQUFtQixHQUFHLElBQUksd0JBQVUsQ0FBTSxLQUFLLENBQUMsQ0FBQTtJQUN0RCxNQUFNLGtCQUFrQixHQUFHLG1CQUFtQixDQUFDLElBQUksQ0FBQyxVQUFVLENBQUE7SUFFOUQsSUFBSSxrQkFBa0IsS0FBSyxRQUFRLElBQUksa0JBQWtCLEtBQUssVUFBVSxJQUFJLGtCQUFrQixLQUFLLFNBQVMsRUFBRTtRQUM1RyxNQUFNLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFLFNBQVMsRUFBRSxrQkFBa0IsRUFBRSxhQUFhLEVBQUUsbUJBQW1CLENBQUMsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUE7S0FDakk7QUFDSCxDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJb3QgfSBmcm9tIFwiYXdzLXNka1wiXG5pbXBvcnQgeyBDbG91ZEV2ZW50IH0gZnJvbSBcImNsb3VkZXZlbnRzXCJcblxuY29uc3QgaW90ID0gbmV3IElvdCgpXG5cbmV4cG9ydCBjb25zdCBoYW5kbGVyID0gYXN5bmMgKGV2ZW50OiBhbnkpID0+IHtcbiAgY29uc29sZS5sb2coZXZlbnQpXG5cbiAgY29uc3QgcmVxdWVzdGVkQ2xvdWRFdmVudCA9IG5ldyBDbG91ZEV2ZW50PGFueT4oZXZlbnQpXG4gIGNvbnN0IG5ld1JlcXVlc3RlZFN0YXR1cyA9IHJlcXVlc3RlZENsb3VkRXZlbnQuZGF0YS5uZXdfc3RhdHVzXG5cbiAgaWYgKG5ld1JlcXVlc3RlZFN0YXR1cyA9PT0gXCJBQ1RJVkVcIiB8fCBuZXdSZXF1ZXN0ZWRTdGF0dXMgPT09IFwiSU5BQ1RJVkVcIiB8fCBuZXdSZXF1ZXN0ZWRTdGF0dXMgPT09IFwiUkVWT0tFRFwiKSB7XG4gICAgYXdhaXQgaW90LnVwZGF0ZUNlcnRpZmljYXRlKHsgbmV3U3RhdHVzOiBuZXdSZXF1ZXN0ZWRTdGF0dXMsIGNlcnRpZmljYXRlSWQ6IHJlcXVlc3RlZENsb3VkRXZlbnQuZGF0YS5jZXJ0aWZpY2F0ZV9pZCB9KS5wcm9taXNlKClcbiAgfVxufVxuIl19