"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.handler = void 0;
const aws_sdk_1 = require("aws-sdk");
const cloudevents_1 = require("cloudevents");
const iot = new aws_sdk_1.Iot();
exports.handler = async (event) => {
    console.log(event);
    const requestedCloudEvent = new cloudevents_1.CloudEvent(event);
    const newRequestedStatus = requestedCloudEvent.data.status;
    if (newRequestedStatus === "ACTIVE" || newRequestedStatus === "INACTIVE") {
        await iot.updateCACertificate({ newStatus: newRequestedStatus, certificateId: requestedCloudEvent.data.certificate_id }).promise();
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSxxQ0FBNkI7QUFDN0IsNkNBQXdDO0FBRXhDLE1BQU0sR0FBRyxHQUFHLElBQUksYUFBRyxFQUFFLENBQUE7QUFFUixRQUFBLE9BQU8sR0FBRyxLQUFLLEVBQUUsS0FBVSxFQUFFLEVBQUU7SUFDMUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQTtJQUVsQixNQUFNLG1CQUFtQixHQUFHLElBQUksd0JBQVUsQ0FBTSxLQUFLLENBQUMsQ0FBQTtJQUN0RCxNQUFNLGtCQUFrQixHQUFHLG1CQUFtQixDQUFDLElBQUksQ0FBQyxNQUFNLENBQUE7SUFFMUQsSUFBSSxrQkFBa0IsS0FBSyxRQUFRLElBQUksa0JBQWtCLEtBQUssVUFBVSxFQUFFO1FBQ3hFLE1BQU0sR0FBRyxDQUFDLG1CQUFtQixDQUFDLEVBQUUsU0FBUyxFQUFFLGtCQUFrQixFQUFFLGFBQWEsRUFBRSxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQTtLQUNuSTtBQUNILENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElvdCB9IGZyb20gXCJhd3Mtc2RrXCJcbmltcG9ydCB7IENsb3VkRXZlbnQgfSBmcm9tIFwiY2xvdWRldmVudHNcIlxuXG5jb25zdCBpb3QgPSBuZXcgSW90KClcblxuZXhwb3J0IGNvbnN0IGhhbmRsZXIgPSBhc3luYyAoZXZlbnQ6IGFueSkgPT4ge1xuICBjb25zb2xlLmxvZyhldmVudClcblxuICBjb25zdCByZXF1ZXN0ZWRDbG91ZEV2ZW50ID0gbmV3IENsb3VkRXZlbnQ8YW55PihldmVudClcbiAgY29uc3QgbmV3UmVxdWVzdGVkU3RhdHVzID0gcmVxdWVzdGVkQ2xvdWRFdmVudC5kYXRhLnN0YXR1c1xuXG4gIGlmIChuZXdSZXF1ZXN0ZWRTdGF0dXMgPT09IFwiQUNUSVZFXCIgfHwgbmV3UmVxdWVzdGVkU3RhdHVzID09PSBcIklOQUNUSVZFXCIpIHtcbiAgICBhd2FpdCBpb3QudXBkYXRlQ0FDZXJ0aWZpY2F0ZSh7IG5ld1N0YXR1czogbmV3UmVxdWVzdGVkU3RhdHVzLCBjZXJ0aWZpY2F0ZUlkOiByZXF1ZXN0ZWRDbG91ZEV2ZW50LmRhdGEuY2VydGlmaWNhdGVfaWQgfSkucHJvbWlzZSgpXG4gIH1cbn1cbiJdfQ==